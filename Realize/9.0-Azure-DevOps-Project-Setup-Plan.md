---
title: "Azure DevOps Project Setup Plan"
date: "2025-09-28"
type: "devops-setup-plan"
phase: "realize"
status: "active"
version: "9.0"
---

# Azure DevOps Project Setup Plan

**Document Purpose:** Complete plan for setting up the HX Data Ingestion Project in Azure DevOps with proper Agile board structure, work item hierarchy, wikis, dashboards, and repositories.

**Setup Date:** 2025-09-28  
**DevOps Team:** HX Data Ingestion Project  
**Status:** Active - Ready for Implementation  
**Related Documents:** All Task Files (5.1-5.10), Test Cases (7.1-7.10), Integration Guide (8.0)

---

## Executive Summary

This plan establishes the complete Azure DevOps project structure for Citadel V2, mapping our comprehensive documentation (1,290 tasks, 650+ test cases) into Azure DevOps work items with proper hierarchy, relationships, and traceability.

**Work Item Hierarchy:**
```
Epic (10)
  â””â”€â”€ Feature (50+)
      â””â”€â”€ User Story (200+)
          â””â”€â”€ Task (1,290+)
```

**Azure DevOps Components:**
- **Boards:** Agile process with custom fields
- **Repos:** Git repository integration
- **Pipelines:** CI/CD automation
- **Wiki:** Project documentation
- **Dashboards:** Custom project dashboards
- **Test Plans:** Test case management

---

## Work Item Hierarchy Design

### Epic Level (10 Epics)

**Epics map to major phases and capabilities:**

1. **Epic 1: Infrastructure Foundation**
   - Description: 15-server canonical deployment with monitoring
   - Tasks: T001-T058 (58 tasks)
   - Timeline: 4 weeks
   - Business Value: Foundation for all services

2. **Epic 2: Data Acquisition System**
   - Description: Intelligent multi-source data acquisition with specialized agents
   - Tasks: T059-T128 (70 tasks)
   - Timeline: 6 weeks
   - Business Value: Core data collection capability

3. **Epic 3: Vector Processing & Indexing**
   - Description: Smart content chunking and vector embedding
   - Tasks: T129-T197 (69 tasks)
   - Timeline: 4 weeks
   - Business Value: Search optimization and accuracy

4. **Epic 4: Query & Retrieval System**
   - Description: Natural language query with RAG-powered responses
   - Tasks: T198-T308 (111 tasks)
   - Timeline: 5 weeks
   - Business Value: User-facing intelligence

5. **Epic 5: Authentication & Security**
   - Description: Enterprise SSO, MFA, RBAC, and compliance
   - Tasks: T309-T448 (140 tasks)
   - Timeline: 3 weeks
   - Business Value: Enterprise readiness and compliance

6. **Epic 6: Event System & Real-Time**
   - Description: Real-time updates, collaboration, and provenance
   - Tasks: T449-T592 (144 tasks)
   - Timeline: 4 weeks
   - Business Value: Transparency and collaboration

7. **Epic 7: User Interface & Experience**
   - Description: Open Web-UI with voice, progress monitoring, collaboration
   - Tasks: T593-T800 (208 tasks)
   - Timeline: 6 weeks
   - Business Value: User adoption and satisfaction

8. **Epic 8: Monitoring & Observability**
   - Description: Comprehensive logging, metrics, tracing, and alerting
   - Tasks: T801-T960 (160 tasks)
   - Timeline: 3 weeks (parallel)
   - Business Value: Operational excellence

9. **Epic 9: Quality Assurance & Testing**
   - Description: Integration, E2E, performance, security testing
   - Tasks: T961-T1136 (176 tasks)
   - Timeline: 2 weeks
   - Business Value: Production quality assurance

10. **Epic 10: Production Deployment**
    - Description: Blue-green deployment and go-live
    - Tasks: T1137-T1290 (154 tasks)
    - Timeline: 1 week
    - Business Value: Production launch

### Feature Level (50+ Features)

**Features map to specifications and major components:**

#### Epic 1 Features (Infrastructure)
- **F1.1:** Network & Control Plane Setup (Tasks: T001-T007)
- **F1.2:** Application Server Provisioning (Tasks: T008-T012)
- **F1.3:** Data Services Infrastructure (Tasks: T013-T019)
- **F1.4:** AI Services Configuration (Tasks: T020-T022)
- **F1.5:** Monitoring Infrastructure (Tasks: T023-T028)
- **F1.6:** Security Infrastructure (Tasks: T029-T035)
- **F1.7:** Container & Orchestration (Tasks: T036-T039)
- **F1.8:** Database Schema Initialization (Tasks: T040-T046)

#### Epic 2 Features (Data Acquisition)
- **F2.1:** Single Page Agent (Tasks: T065, T070, T079, T084-T085)
- **F2.2:** Sequential Sitemap Agent (Tasks: T066, T071, T080, T086)
- **F2.3:** Parallel Sitemap Agent (Tasks: T067, T072, T081)
- **F2.4:** File Processing Agent (Tasks: T068, T073, T082)
- **F2.5:** Recursive Exploration Agent (Tasks: T069, T072, T083, T087)
- **F2.6:** Agent Management & Orchestration (Tasks: T089-T093)
- **F2.7:** Acquisition Service & API (Tasks: T094-T099, T119-T123)

#### Epic 3 Features (Vector Processing)
- **F3.1:** Hierarchical Markdown Chunking (Tasks: T135, T145, T149)
- **F3.2:** Semantic Content Chunking (Tasks: T137, T147, T150)
- **F3.3:** Embedding Generation (Tasks: T139-T140, T153-T158)
- **F3.4:** Vector Storage & Qdrant Integration (Tasks: T142-T143, T159-T164)
- **F3.5:** Indexing Service Orchestration (Tasks: T165-T171)
- **F3.6:** Batch Processing & Optimization (Tasks: T177-T181)

#### Epic 4 Features (Query & Retrieval)
- **F4.1:** Natural Language Query Processing (Tasks: T207-T209, T219-T227)
- **F4.2:** Vector Similarity Search (Tasks: T211, T228-T232)
- **F4.3:** Hybrid Search (Vector + Keyword) (Tasks: T212, T233-T237)
- **F4.4:** Context Assembly & Ranking (Tasks: T215, T243-T248)
- **F4.5:** LLM Response Generation (Tasks: T216, T254-T259)
- **F4.6:** Source Attribution & Provenance (Tasks: T217, T260-T264)
- **F4.7:** Conversation Management (Tasks: T272-T277)

#### Epic 5 Features (Authentication)
- **F5.1:** Clerk SSO Integration (Tasks: T329-T334, T746-T751)
- **F5.2:** Multi-Factor Authentication (Tasks: T335-T340)
- **F5.3:** Session & Token Management (Tasks: T341-T354)
- **F5.4:** Role-Based Access Control (Tasks: T355-T367)
- **F5.5:** Collection-Level Permissions (Tasks: T368-T378)
- **F5.6:** Audit Logging & Compliance (Tasks: T390-T403)

#### Epic 6 Features (Event System)
- **F6.1:** Kafka Event Bus Setup (Tasks: T449-T465)
- **F6.2:** Event Publishing & Consumption (Tasks: T466-T508)
- **F6.3:** AG-UI Event Bus Integration (Tasks: T509-T520)
- **F6.4:** Real-Time Progress Updates (Tasks: T521-T531)
- **F6.5:** LiveKit Collaboration (Tasks: T532-T548)
- **F6.6:** Voice Integration (Tasks: T544-T548)
- **F6.7:** Notification System (Tasks: T549-T560)

#### Epic 7 Features (Frontend)
- **F7.1:** Open Web-UI Foundation (Tasks: T593-T620)
- **F7.2:** Dashboard Module (Tasks: T631-T640)
- **F7.3:** Acquisition Module (Tasks: T641-T652)
- **F7.4:** Progress Monitoring Module (Tasks: T653-T664)
- **F7.5:** Query Interface Module (Tasks: T665-T683)
- **F7.6:** Collection Management Module (Tasks: T684-T696)
- **F7.7:** Voice Interface (Tasks: T697-T705)
- **F7.8:** Collaboration Features (Tasks: T706-T715)
- **F7.9:** State Management & Hooks (Tasks: T716-T727)

#### Epic 8 Features (Monitoring)
- **F8.1:** Structured Logging (Tasks: T801-T820)
- **F8.2:** Metrics Collection (Tasks: T821-T840)
- **F8.3:** Distributed Tracing (Tasks: T841-T860)
- **F8.4:** Dashboards & Visualization (Tasks: T861-T879)
- **F8.5:** Alerting & SLO Monitoring (Tasks: T880-T909)

#### Epic 9 Features (Quality Assurance)
- **F9.1:** Integration Test Suite (Tasks: T975-T1002)
- **F9.2:** E2E Test Automation (Tasks: T1010-T1030)
- **F9.3:** Performance Testing (Tasks: T1031-T1053)
- **F9.4:** Security Testing (Tasks: T1054-T1073)
- **F9.5:** Accessibility Testing (Tasks: T1095-T1105)
- **F9.6:** User Acceptance Testing (Tasks: T1115-T1126)

#### Epic 10 Features (Production)
- **F10.1:** Pre-Deployment Validation (Tasks: T1137-T1162)
- **F10.2:** Blue Environment Deployment (Tasks: T1175-T1188)
- **F10.3:** Production Cutover (Tasks: T1217-T1232)
- **F10.4:** Post-Go-Live Support (Tasks: T1276-T1290)

### User Story Level (200+ User Stories)

**User Stories map to functional requirements and user scenarios from specifications:**

**Example User Story Structure:**
```
Title: As a data analyst, I want to acquire data from sitemaps so that I can efficiently collect large document sets

Acceptance Criteria:
- User can select sitemap acquisition type
- System processes all URLs from sitemap
- Progress updates shown in real-time
- All pages stored in named collection
- Completion summary shows statistics

Tasks:
- T066: Contract test SequentialSitemapAgent
- T071: Integration test sitemap processing
- T080: Implement SequentialSitemapAgent
- T086: Implement sitemap parser tool
- Related test cases: TC-ACQ-021, TC-ACQ-022
```

### Task Level (1,290+ Tasks)

**Tasks map directly to our implementation task files (5.1-5.10):**
- Direct 1:1 mapping from task files to Azure DevOps tasks
- Each task includes file paths, dependencies, and acceptance criteria
- Tasks marked with [P] can be worked in parallel
- Dependencies tracked through task relationships

---

## Azure DevOps Project Configuration

### Process Template

**Selected Process:** Agile

**Reason:** Best fit for iterative development with:
- Epic â†’ Feature â†’ User Story â†’ Task hierarchy
- Sprint planning and tracking
- Velocity and burndown charts
- Flexible workflow states

### Work Item Types Configuration

#### Epic
**Custom Fields:**
- Business Value (1-10 scale)
- Strategic Priority (Critical/High/Medium/Low)
- Target Release
- Success Metrics
- Constitutional Requirement

#### Feature
**Custom Fields:**
- Specification Reference (link to spec file)
- Architecture Component
- Technical Priority
- Estimated Story Points
- Test Coverage Target

#### User Story  
**Custom Fields:**
- Acceptance Criteria (markdown)
- Test Cases (links to test case IDs)
- Performance Requirement
- Security Requirement
- Definition of Done

#### Task
**Custom Fields:**
- File Path (implementation location)
- Can Parallel ([P] indicator)
- Estimated Hours
- Constitutional Compliance
- Test Requirements

### Workflow States

**Custom States:**
- New (default)
- Ready for Development
- In Progress
- Code Review
- Testing
- Done
- Blocked (with reason)

### Area Paths

```
HX-Data-Ingestion-Project
â”œâ”€â”€ Infrastructure
â”‚   â”œâ”€â”€ Networking
â”‚   â”œâ”€â”€ Servers
â”‚   â”œâ”€â”€ Databases
â”‚   â””â”€â”€ Security
â”œâ”€â”€ Backend
â”‚   â”œâ”€â”€ Agents
â”‚   â”œâ”€â”€ Services
â”‚   â”œâ”€â”€ API
â”‚   â””â”€â”€ Models
â”œâ”€â”€ Frontend
â”‚   â”œâ”€â”€ Components
â”‚   â”œâ”€â”€ Pages
â”‚   â””â”€â”€ State Management
â”œâ”€â”€ DevOps
â”‚   â”œâ”€â”€ CI/CD
â”‚   â”œâ”€â”€ Monitoring
â”‚   â””â”€â”€ Security
â”œâ”€â”€ Quality Assurance
â”‚   â”œâ”€â”€ Testing
â”‚   â””â”€â”€ Documentation
â””â”€â”€ Project Management
```

### Iteration Paths (Sprints)

```
Citadel V2
â”œâ”€â”€ Sprint 0: Planning & Setup (2 weeks)
â”œâ”€â”€ Phase 1: Infrastructure (4 weeks = 2 sprints)
â”‚   â”œâ”€â”€ Sprint 1: Network & Control Plane
â”‚   â””â”€â”€ Sprint 2: Data & AI Services
â”œâ”€â”€ Phase 2-4: Core Services (15 weeks = 7-8 sprints)
â”‚   â”œâ”€â”€ Sprint 3: Data Acquisition Foundation
â”‚   â”œâ”€â”€ Sprint 4: Specialized Agents
â”‚   â”œâ”€â”€ Sprint 5-6: Vector Processing
â”‚   â”œâ”€â”€ Sprint 7-8: Query & Retrieval
â”‚   â””â”€â”€ Sprint 9-10: Service Integration
â”œâ”€â”€ Phase 5-6: Security & Events (7 weeks = 3-4 sprints)
â”‚   â”œâ”€â”€ Sprint 11-12: Authentication & RBAC
â”‚   â””â”€â”€ Sprint 13-14: Event System & LiveKit
â”œâ”€â”€ Phase 7: Frontend (6 weeks = 3 sprints)
â”‚   â”œâ”€â”€ Sprint 15-16: UI Components & Modules
â”‚   â””â”€â”€ Sprint 17: Integration & Polish
â”œâ”€â”€ Phase 8: Monitoring (3 weeks = 2 sprints - parallel)
â”‚   â””â”€â”€ Sprint 11-12: Observability Stack
â”œâ”€â”€ Phase 9: Testing (2 weeks = 1 sprint)
â”‚   â””â”€â”€ Sprint 18: Integration & E2E Testing
â””â”€â”€ Phase 10: Production (1 week)
    â””â”€â”€ Sprint 19: Deployment & Go-Live
```

---

## Work Item Creation Strategy

### Approach 1: Bulk Import via CSV

**Advantages:**
- Fast creation of all work items
- Preserves relationships
- Easy to review before import

**Process:**
1. Generate CSV files from task documentation
2. Import using Azure DevOps CSV import
3. Validate relationships
4. Adjust as needed

### Approach 2: Programmatic Creation via Azure CLI/REST API

**Advantages:**
- Fully automated
- Can include all metadata
- Repeatable and version-controlled

**Process:**
1. Create scripts to generate work items
2. Execute scripts with proper authentication
3. Link work items via relationships
4. Validate creation

### Recommended: Hybrid Approach

**Phase 1:** Create Epic and Feature structure manually (10 Epics, 50 Features)  
**Phase 2:** Bulk import User Stories via CSV  
**Phase 3:** Programmatically create Tasks from task files  
**Phase 4:** Establish relationships and dependencies

---

## Implementation Plan

### Step 1: Azure DevOps Project Initial Setup

**Script:** `scripts/azure-devops/01-initialize-project.ps1`

```powershell
# Initialize Azure DevOps Project Structure

$AZDO_ORG_URL = "https://dev.azure.com/hana-x"
$AZDO_PROJECT = "HX-Data-Ingestion-Project"

# Configure project settings
Write-Host "Configuring project settings..."

# Enable features
az devops configure --defaults organization=$AZDO_ORG_URL project=$AZDO_PROJECT

# Verify project
$project = az devops project show --project $AZDO_PROJECT --output json | ConvertFrom-Json
Write-Host "âœ… Project: $($project.name)"
Write-Host "   Process: $($project.capabilities.processTemplate.templateName)"
Write-Host "   Visibility: $($project.visibility)"
```

**Tasks:**
- [ ] Verify Agile process template active
- [ ] Configure project description
- [ ] Set project visibility (Private/Public)
- [ ] Enable Wiki
- [ ] Enable Boards
- [ ] Enable Repos
- [ ] Enable Pipelines
- [ ] Enable Test Plans

---

### Step 2: Create Area Path Structure

**Script:** `scripts/azure-devops/02-create-area-paths.ps1`

```powershell
# Create Area Path Hierarchy

$areas = @(
    "Infrastructure",
    "Infrastructure\Networking",
    "Infrastructure\Servers",
    "Infrastructure\Databases",
    "Infrastructure\Security",
    "Backend",
    "Backend\Agents",
    "Backend\Services",
    "Backend\API",
    "Backend\Models",
    "Frontend",
    "Frontend\Components",
    "Frontend\Pages",
    "Frontend\State Management",
    "DevOps",
    "DevOps\CI-CD",
    "DevOps\Monitoring",
    "DevOps\Security",
    "Quality Assurance",
    "Quality Assurance\Testing",
    "Quality Assurance\Documentation",
    "Project Management"
)

foreach ($area in $areas) {
    Write-Host "Creating area: $area"
    
    az boards area project create `
        --name $area `
        --project $AZDO_PROJECT `
        --output table
}

Write-Host "âœ… Area paths created"
```

**Tasks:**
- [ ] Create top-level areas
- [ ] Create sub-areas for each category
- [ ] Verify area path hierarchy
- [ ] Set default area path

---

### Step 3: Create Iteration Structure (Sprints)

**Script:** `scripts/azure-devops/03-create-iterations.ps1`

```powershell
# Create Iteration/Sprint Structure

$rootIteration = "Citadel V2"

# Create root iteration
az boards iteration project create `
    --name $rootIteration `
    --project $AZDO_PROJECT

# Create sprint iterations
$sprints = @(
    @{Name="Sprint 0: Planning & Setup"; Start="2025-10-01"; Duration=14},
    @{Name="Sprint 1: Network & Control"; Start="2025-10-15"; Duration=14},
    @{Name="Sprint 2: Data & AI Services"; Start="2025-10-29"; Duration=14},
    @{Name="Sprint 3: Acquisition Foundation"; Start="2025-11-12"; Duration=14},
    @{Name="Sprint 4: Specialized Agents"; Start="2025-11-26"; Duration=14},
    @{Name="Sprint 5-6: Vector Processing"; Start="2025-12-10"; Duration=28},
    @{Name="Sprint 7-8: Query & Retrieval"; Start="2026-01-07"; Duration=28},
    @{Name="Sprint 9-10: Service Integration"; Start="2026-02-04"; Duration=28},
    @{Name="Sprint 11-12: Auth & Events"; Start="2026-03-04"; Duration=28},
    @{Name="Sprint 13-14: Event System"; Start="2026-04-01"; Duration=28},
    @{Name="Sprint 15-16: Frontend UI"; Start="2026-04-29"; Duration=28},
    @{Name="Sprint 17: UI Polish"; Start="2026-05-27"; Duration=14},
    @{Name="Sprint 18: Testing"; Start="2026-06-10"; Duration=14},
    @{Name="Sprint 19: Production Deploy"; Start="2026-06-24"; Duration=7}
)

foreach ($sprint in $sprints) {
    $startDate = Get-Date $sprint.Start
    $endDate = $startDate.AddDays($sprint.Duration)
    
    Write-Host "Creating: $($sprint.Name)"
    Write-Host "  Start: $($startDate.ToString('yyyy-MM-dd'))"
    Write-Host "  End: $($endDate.ToString('yyyy-MM-dd'))"
    
    az boards iteration project create `
        --name $sprint.Name `
        --path $rootIteration `
        --start-date $startDate.ToString('yyyy-MM-dd') `
        --finish-date $endDate.ToString('yyyy-MM-dd') `
        --project $AZDO_PROJECT
}

Write-Host "âœ… Iterations created"
```

**Tasks:**
- [ ] Create root iteration "Citadel V2"
- [ ] Create 19 sprint iterations
- [ ] Set sprint dates
- [ ] Assign sprints to team

---

### Step 4: Create Epic Work Items

**Script:** `scripts/azure-devops/04-create-epics.ps1`

```powershell
# Create 10 Epic Work Items

$epics = @(
    @{
        Title = "Epic 1: Infrastructure Foundation"
        Description = "15-server canonical deployment with complete monitoring and security infrastructure"
        BusinessValue = 10
        Priority = "Critical"
        StartDate = "2025-10-15"
        TargetDate = "2025-11-12"
        TaskCount = 58
    },
    @{
        Title = "Epic 2: Data Acquisition System"
        Description = "Intelligent multi-source data acquisition with 5 specialized Pydantic-AI agents"
        BusinessValue = 10
        Priority = "Critical"
        StartDate = "2025-11-12"
        TargetDate = "2025-12-24"
        TaskCount = 70
    },
    @{
        Title = "Epic 3: Vector Processing & Indexing"
        Description = "Smart content chunking, embedding generation, and Qdrant vector storage"
        BusinessValue = 9
        Priority = "Critical"
        StartDate = "2025-12-24"
        TargetDate = "2026-01-21"
        TaskCount = 69
    },
    @{
        Title = "Epic 4: Query & Retrieval System"
        Description = "Natural language query processing with RAG-powered response generation via LiteLLM"
        BusinessValue = 10
        Priority = "Critical"
        StartDate = "2026-01-21"
        TargetDate = "2026-02-25"
        TaskCount = 111
    },
    @{
        Title = "Epic 5: Authentication & Security"
        Description = "Enterprise SSO with Clerk, MFA, RBAC, collection-level permissions, and comprehensive audit logging"
        BusinessValue = 10
        Priority = "Critical"
        StartDate = "2026-02-25"
        TargetDate = "2026-03-18"
        TaskCount = 140
    },
    @{
        Title = "Epic 6: Event System & Real-Time Communication"
        Description = "AG-UI event bus, LiveKit collaboration, real-time progress updates, and voice integration"
        BusinessValue = 8
        Priority = "High"
        StartDate = "2026-03-18"
        TargetDate = "2026-04-15"
        TaskCount = 144
    },
    @{
        Title = "Epic 7: User Interface & Experience"
        Description = "Open Web-UI frontend with React, real-time updates, voice interface, and collaboration features"
        BusinessValue = 9
        Priority = "High"
        StartDate = "2026-04-15"
        TargetDate = "2026-05-27"
        TaskCount = 208
    },
    @{
        Title = "Epic 8: Monitoring & Observability"
        Description = "Comprehensive logging, metrics, tracing with Prometheus, Grafana, Loki, and Jaeger"
        BusinessValue = 8
        Priority = "High"
        StartDate = "2025-11-12"
        TargetDate = "2026-05-27"
        TaskCount = 160
        Tags = "parallel"
    },
    @{
        Title = "Epic 9: Quality Assurance & Testing"
        Description = "Integration, E2E, performance, security, and accessibility testing for production readiness"
        BusinessValue = 10
        Priority = "Critical"
        StartDate = "2026-05-27"
        TargetDate = "2026-06-10"
        TaskCount = 176
    },
    @{
        Title = "Epic 10: Production Deployment & Go-Live"
        Description = "Blue-green deployment, traffic cutover, validation, and production stabilization"
        BusinessValue = 10
        Priority = "Critical"
        StartDate = "2026-06-10"
        TargetDate = "2026-06-24"
        TaskCount = 154
    }
)

$epicIds = @{}
foreach ($epic in $epics) {
    Write-Host "Creating: $($epic.Title)"
    
    $description = @"
$($epic.Description)

**Task Count:** $($epic.TaskCount)
**Timeline:** $($epic.StartDate) to $($epic.TargetDate)
**Business Value:** $($epic.BusinessValue)/10
**Priority:** $($epic.Priority)

**Related Documents:**
- Constitution: 1.0-Citadel-Project-Constition.md
- Implementation Plan: 2.0-Citadel_Implemenation-Plan.md
- Task Files: 5.0-Tasks/
- Test Cases: 7.0-Test_Cases/
"@

    $epicJson = az boards work-item create `
        --type Epic `
        --title $epic.Title `
        --description $description `
        --area "HX-Data-Ingestion-Project" `
        --iteration "Citadel V2" `
        --output json | ConvertFrom-Json
    
    $epicIds[$epic.Title] = $epicJson.id
    Write-Host "  âœ… Created: Epic #$($epicJson.id)"
    
    # Add custom fields
    az boards work-item update `
        --id $epicJson.id `
        --fields "Microsoft.VSTS.Common.Priority=$($epic.Priority)" `
        --output table
}

# Save epic IDs for later use
$epicIds | ConvertTo-Json | Out-File "out/epic-ids.json"
Write-Host "âœ… All Epics created and saved to out/epic-ids.json"
```

**Output:**
- 10 Epic work items created
- Epic IDs saved to `out/epic-ids.json`
- All epics visible on Boards

---

### Step 5: Create Feature Work Items

**Script:** `scripts/azure-devops/05-create-features.ps1`

```powershell
# Create Feature Work Items and link to Epics

$epicIds = Get-Content "out/epic-ids.json" | ConvertFrom-Json

# Epic 1 Features (Infrastructure)
$epic1Features = @(
    @{Title="F1.1: Network & Control Plane Setup"; Tasks="T001-T007"; Story Points=13},
    @{Title="F1.2: Application Server Provisioning"; Tasks="T008-T012"; Story Points=8},
    @{Title="F1.3: Data Services Infrastructure"; Tasks="T013-T019"; Story Points=13},
    @{Title="F1.4: AI Services Configuration"; Tasks="T020-T022"; Story Points=5},
    @{Title="F1.5: Monitoring Infrastructure"; Tasks="T023-T028"; Story Points=8},
    @{Title="F1.6: Security Infrastructure"; Tasks="T029-T035"; Story Points=13},
    @{Title="F1.7: Container & Orchestration"; Tasks="T036-T039"; Story Points=8},
    @{Title="F1.8: Database Schema Initialization"; Tasks="T040-T046"; Story Points=13}
)

$featureIds = @{}

foreach ($feature in $epic1Features) {
    Write-Host "Creating: $($feature.Title)"
    
    $description = @"
**Tasks:** $($feature.Tasks)
**Story Points:** $($feature.Story Points)
**Specification:** System Architecture v3.1
**Area:** Infrastructure

**Related Task File:** 5.1-Infrastructure-Setup-Tasks.md
"@

    $featureJson = az boards work-item create `
        --type Feature `
        --title $feature.Title `
        --description $description `
        --output json | ConvertFrom-Json
    
    $featureId = $featureJson.id
    $featureIds[$feature.Title] = $featureId
    
    # Link to Epic 1
    $epicId = $epicIds.'Epic 1: Infrastructure Foundation'
    az boards work-item relation add `
        --id $featureId `
        --relation-type parent `
        --target-id $epicId `
        --output table
    
    Write-Host "  âœ… Feature #$featureId linked to Epic #$epicId"
}

Write-Host "âœ… Epic 1 Features created"

# Repeat for other epics...
# (Similar structure for Epic 2-10)

$featureIds | ConvertTo-Json | Out-File "out/feature-ids.json"
```

**Output:**
- 50+ Feature work items created
- All features linked to parent epics
- Feature IDs saved to `out/feature-ids.json`

---

### Step 6: Generate User Stories from Specifications

**Script:** `scripts/azure-devops/06-create-user-stories.ps1`

```powershell
# Create User Stories from Specifications

# Example: Data Acquisition User Stories

$userStories = @(
    @{
        Title = "As a data analyst, I want to acquire single web pages so that I can collect documentation efficiently"
        Description = @"
**Specification:** 4.5-Citadel-Data-Acquisition.md (FR-001)
**Feature:** F2.1 - Single Page Agent

**Acceptance Criteria:**
- [ ] User can enter URL in acquisition form
- [ ] System selects SinglePageAgent automatically
- [ ] Page content extracted and converted to Markdown
- [ ] Content stored in specified collection
- [ ] Progress updates shown in real-time

**Tasks:** T065, T070, T079, T084-T085
**Test Cases:** TC-ACQ-001, TC-ACQ-050

**Definition of Done:**
- All unit tests passing
- Integration test passing
- E2E test passing
- Code reviewed and approved
- Documentation updated
"@
        StoryPoints = 5
        Feature = "F2.1: Single Page Agent"
        AcceptanceCriteria = "See description"
    },
    @{
        Title = "As a data analyst, I want to process XML sitemaps so that I can acquire large document collections"
        Description = @"
**Specification:** 4.5-Citadel-Data-Acquisition.md (FR-001, FR-002)
**Feature:** F2.2 - Sequential Sitemap Agent

**Acceptance Criteria:**
- [ ] System detects sitemap URLs automatically
- [ ] All URLs extracted from sitemap
- [ ] Pages processed sequentially with rate limiting
- [ ] Memory usage controlled
- [ ] All pages stored in collection

**Tasks:** T066, T071, T080, T086
**Test Cases:** TC-ACQ-002, TC-ACQ-021

**Performance Requirements:**
- Process 100 pages/minute
- Memory usage < 1GB
- Rate limit: 10 pages/second
"@
        StoryPoints = 8
        Feature = "F2.2: Sequential Sitemap Agent"
    }
    # ... more user stories
)

$featureIds = Get-Content "out/feature-ids.json" | ConvertFrom-Json

foreach ($story in $userStories) {
    Write-Host "Creating: $($story.Title)"
    
    $storyJson = az boards work-item create `
        --type "User Story" `
        --title $story.Title `
        --description $story.Description `
        --output json | ConvertFrom-Json
    
    $storyId = $storyJson.id
    
    # Link to parent feature
    $featureId = $featureIds[$story.Feature]
    if ($featureId) {
        az boards work-item relation add `
            --id $storyId `
            --relation-type parent `
            --target-id $featureId
    }
    
    # Set story points
    az boards work-item update `
        --id $storyId `
        --fields "Microsoft.VSTS.Scheduling.StoryPoints=$($story.StoryPoints)"
    
    Write-Host "  âœ… User Story #$storyId created"
}
```

**Output:**
- 200+ User Story work items created
- All linked to parent features
- Story points assigned
- Acceptance criteria defined

---

### Step 7: Create Task Work Items

**Script:** `scripts/azure-devops/07-create-tasks-bulk.ps1`

```powershell
# Create Tasks from Task Files (5.1-5.10)

# This script reads our task files and creates Azure DevOps Task work items

function Parse-TaskFile {
    param([string]$FilePath)
    
    $content = Get-Content $FilePath -Raw
    
    # Extract task pattern: - [ ] T### [P?] Description
    $taskPattern = '- \[ \] (T\d+) (\[P\] )?(.+)'
    
    $tasks = [regex]::Matches($content, $taskPattern) | ForEach-Object {
        @{
            TaskId = $_.Groups[1].Value
            Parallel = $_.Groups[2].Value -eq '[P] '
            Description = $_.Groups[3].Value.Trim()
        }
    }
    
    return $tasks
}

# Process each task file
$taskFiles = @(
    @{File="Realize/5.0-Tasks/5.1-Infrastructure-Setup-Tasks.md"; Epic="Epic 1"},
    @{File="Realize/5.0-Tasks/5.2-Data-Acquisition-Agent-Tasks.md"; Epic="Epic 2"},
    @{File="Realize/5.0-Tasks/5.3-Vector-Processing-Tasks.md"; Epic="Epic 3"},
    @{File="Realize/5.0-Tasks/5.4-Retrieval-Query-Tasks.md"; Epic="Epic 4"},
    @{File="Realize/5.0-Tasks/5.5-Authentication-Security-Tasks.md"; Epic="Epic 5"},
    @{File="Realize/5.0-Tasks/5.6-Event-System-RealTime-Tasks.md"; Epic="Epic 6"},
    @{File="Realize/5.0-Tasks/5.7-Frontend-UI-Tasks.md"; Epic="Epic 7"},
    @{File="Realize/5.0-Tasks/5.8-Monitoring-Observability-Tasks.md"; Epic="Epic 8"},
    @{File="Realize/5.0-Tasks/5.9-Integration-E2E-Testing-Tasks.md"; Epic="Epic 9"},
    @{File="Realize/5.0-Tasks/5.10-Production-Deployment-Tasks.md"; Epic="Epic 10"}
)

$createdTasks = @()

foreach ($taskFile in $taskFiles) {
    Write-Host "`nProcessing: $($taskFile.File)" -ForegroundColor Cyan
    
    $tasks = Parse-TaskFile -FilePath $taskFile.File
    
    Write-Host "  Found $($tasks.Count) tasks"
    
    foreach ($task in $tasks) {
        $title = "$($task.TaskId): $($task.Description)"
        
        # Extract file path if present in description
        $filePath = if ($task.Description -match 'in (.+\.(py|tsx?|yml|md))') { 
            $matches[1] 
        } else { 
            "TBD" 
        }
        
        $taskDescription = @"
**Task ID:** $($task.TaskId)
**Can Parallel:** $($task.Parallel)
**File Path:** $filePath

**Description:** $($task.Description)

**Related:**
- Task File: $($taskFile.File)
- Epic: $($taskFile.Epic)
"@

        # Create task (in batches to avoid rate limiting)
        Write-Host "    Creating: $($task.TaskId)" -NoNewline
        
        $taskJson = az boards work-item create `
            --type Task `
            --title $title `
            --description $taskDescription `
            --output json 2>$null | ConvertFrom-Json
        
        if ($taskJson) {
            $createdTasks += @{
                TaskId = $task.TaskId
                WorkItemId = $taskJson.id
                Epic = $taskFile.Epic
                Parallel = $task.Parallel
            }
            
            Write-Host " âœ… #$($taskJson.id)" -ForegroundColor Green
        } else {
            Write-Host " âŒ Failed" -ForegroundColor Red
        }
        
        # Rate limiting (max 100 requests per minute)
        Start-Sleep -Milliseconds 700
    }
}

# Save created task mapping
$createdTasks | ConvertTo-Json | Out-File "out/created-tasks.json"
Write-Host "`nâœ… All tasks created: $($createdTasks.Count) tasks"
Write-Host "   Mapping saved to out/created-tasks.json"
```

**Output:**
- 1,290 Task work items created
- Task IDs mapped to work item IDs
- Parallel markers preserved
- File paths included

---

### Step 8: Establish Work Item Relationships

**Script:** `scripts/azure-devops/08-link-work-items.ps1`

```powershell
# Link Tasks to User Stories, User Stories to Features, Features to Epics

Write-Host "Establishing work item relationships..."

# Load all ID mappings
$epicIds = Get-Content "out/epic-ids.json" | ConvertFrom-Json
$featureIds = Get-Content "out/feature-ids.json" | ConvertFrom-Json
$createdTasks = Get-Content "out/created-tasks.json" | ConvertFrom-Json

# Link Features to Epics (already done in step 5)

# Link User Stories to Features
# (Logic to match user stories to features based on task ranges)

# Link Tasks to User Stories
# (Logic to group tasks and link to appropriate user stories)

# Example: Link task to user story
foreach ($task in $createdTasks) {
    # Determine parent user story based on task ID range
    $parentStoryId = Get-ParentStoryId -TaskId $task.TaskId
    
    if ($parentStoryId) {
        az boards work-item relation add `
            --id $task.WorkItemId `
            --relation-type parent `
            --target-id $parentStoryId `
            --output table
    }
}

Write-Host "âœ… Work item relationships established"
```

**Output:**
- All tasks linked to user stories
- All user stories linked to features
- All features linked to epics
- Complete hierarchy visible on boards

---

### Step 9: Create Queries

**Script:** `scripts/azure-devops/09-create-queries.ps1`

```powershell
# Create Useful Shared Queries

$queries = @(
    @{
        Name = "Active Work Items (Last 7 Days)"
        WIQL = @"
SELECT [System.Id], [System.Title], [System.State], [System.AssignedTo], [System.WorkItemType]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [System.State] IN ('Active', 'New', 'Committed', 'In Progress')
AND [System.ChangedDate] >= @Today - 7
ORDER BY [System.ChangedDate] DESC
"@
    },
    @{
        Name = "Current Sprint - All Work"
        WIQL = @"
SELECT [System.Id], [System.WorkItemType], [System.Title], [System.State], [System.AssignedTo]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [System.IterationPath] = @CurrentIteration
ORDER BY [System.WorkItemType], [System.State]
"@
    },
    @{
        Name = "Ready for Code Review"
        WIQL = @"
SELECT [System.Id], [System.Title], [System.AssignedTo]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [System.State] = 'Code Review'
ORDER BY [System.CreatedDate] DESC
"@
    },
    @{
        Name = "Blocked Items"
        WIQL = @"
SELECT [System.Id], [System.Title], [System.AssignedTo], [System.Reason]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [System.State] = 'Blocked'
ORDER BY [System.CreatedDate]
"@
    },
    @{
        Name = "My Active Tasks"
        WIQL = @"
SELECT [System.Id], [System.Title], [System.State]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [System.WorkItemType] = 'Task'
AND [System.AssignedTo] = @Me
AND [System.State] IN ('Active', 'In Progress', 'Code Review')
ORDER BY [System.ChangedDate] DESC
"@
    },
    @{
        Name = "GitHub-Linked Work Items"
        WIQL = @"
SELECT [System.Id], [System.Title], [System.State], [System.WorkItemType]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [System.Links.LinkType] = 'ArtifactLink'
ORDER BY [System.ChangedDate] DESC
"@
    },
    @{
        Name = "High Priority - Not Started"
        WIQL = @"
SELECT [System.Id], [System.WorkItemType], [System.Title]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [Microsoft.VSTS.Common.Priority] <= 2
AND [System.State] = 'New'
ORDER BY [Microsoft.VSTS.Common.Priority]
"@
    },
    @{
        Name = "Test Coverage Tracking"
        WIQL = @"
SELECT [System.Id], [System.Title], [System.State]
FROM WorkItems
WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'
AND [System.Tags] CONTAINS 'testing'
ORDER BY [System.WorkItemType], [System.State]
"@
    }
)

$queryIds = @{}

foreach ($query in $queries) {
    Write-Host "Creating query: $($query.Name)"
    
    $queryJson = az boards query create `
        --wiql $query.WIQL `
        --name $query.Name `
        --folder "Shared Queries" `
        --output json | ConvertFrom-Json
    
    $queryIds[$query.Name] = $queryJson.id
    Write-Host "  âœ… Query created: $($queryJson.id)"
}

$queryIds | ConvertTo-Json | Out-File "out/query-ids.json"
Write-Host "âœ… All queries created"
```

**Output:**
- 8+ shared queries created
- Queries organized in Shared Queries folder
- Query IDs saved for dashboard creation

---

### Step 10: Create Project Wiki

**Script:** `scripts/azure-devops/10-setup-wiki.ps1`

```powershell
# Create and Populate Project Wiki

Write-Host "Setting up Azure DevOps Wiki..."

# Create wiki (code wiki backed by repo)
az devops wiki create `
    --name "HX-Data-Ingestion-Project-Wiki" `
    --type codewiki `
    --mapped-path "/wiki" `
    --repository $GH_REPO `
    --version $DEFAULT_BRANCH `
    --project $AZDO_PROJECT

Write-Host "âœ… Wiki created"

# Create wiki structure in repository
mkdir -p wiki

# Create wiki home page
cat > wiki/Home.md <<'MD'
# HX Data Ingestion Project - Citadel V2

Welcome to the project wiki for Citadel V2 - Enterprise Agent-First Data Ingestion Platform.

## Quick Links

### Project Documentation
- [[Project Constitution|Constitution]]
- [[Implementation Plan|Implementation-Plan]]
- [[System Architecture|System-Architecture]]
- [[Technology Stack|Technology-Stack]]

### Development
- [[Getting Started|Getting-Started]]
- [[Development Guidelines|Development-Guidelines]]
- [[Testing Strategy|Testing-Strategy]]
- [[Deployment Guide|Deployment-Guide]]

### Azure DevOps
- [[Work Item Guide|Work-Item-Guide]]
- [[Sprint Planning|Sprint-Planning]]
- [[CI/CD Pipeline|CICD-Pipeline]]

## Project Status

**Current Phase:** Realize - Implementation Planning Complete  
**Next Milestone:** Sprint 0 - Infrastructure Foundation  
**Total Work Items:** 1,500+  
**Estimated Duration:** 38 weeks (28-30 weeks with parallelization)

## Key Metrics

- **Epics:** 10
- **Features:** 50+
- **User Stories:** 200+
- **Tasks:** 1,290
- **Test Cases:** 650+

## Team

- **Product Owner:** TBD
- **Scrum Master:** TBD
- **Development Team:** 10-12 engineers
- **QA Team:** 2 engineers
- **DevOps:** 1 engineer

MD

# Copy key documents to wiki
cp "Realize/1.0-Citadel-Project-Constition.md" "wiki/Constitution.md"
cp "Realize/2.0-Citadel_Implemenation-Plan.md" "wiki/Implementation-Plan.md"
cp "Realize/3.1-Citadel-System-Architecture.md" "wiki/System-Architecture.md"
cp "Realize/3.2-Citadel-Technology-Stack.md" "wiki/Technology-Stack.md"
cp "Realize/6.0-Citadel-Test-Plan.md" "wiki/Testing-Strategy.md"

# Commit wiki content
git add wiki/
git commit -m "docs(wiki): initialize project wiki (AB#<id>)"
git push

Write-Host "âœ… Wiki populated with project documentation"
```

**Output:**
- Project wiki created
- Home page with navigation
- Key documents added
- Wiki accessible in Azure DevOps

---

### Step 11: Create Custom Dashboards

**Script:** `scripts/azure-devops/11-create-dashboards.ps1`

```powershell
# Create Project Dashboards

$dashboards = @(
    @{
        Name = "Project Overview"
        Description = "High-level project status and progress"
        Widgets = @(
            "Sprint Burndown",
            "Cumulative Flow",
            "Velocity",
            "Work Item Chart (by state)",
            "Query Results (Active Last 7 Days)"
        )
    },
    @{
        Name = "Development Dashboard"
        Description = "For development team - active work and blockers"
        Widgets = @(
            "Assigned to Me",
            "Code Review Queue",
            "Blocked Items",
            "Sprint Capacity"
        )
    },
    @{
        Name = "Quality Dashboard"
        Description = "Testing and quality metrics"
        Widgets = @(
            "Test Results Trend",
            "Code Coverage",
            "Bug Trend",
            "Query (Test Coverage Tracking)"
        )
    },
    @{
        Name = "Leadership Dashboard"
        Description = "Executive view of project health"
        Widgets = @(
            "Epic Progress",
            "Sprint Burndown",
            "Velocity Trend",
            "Team Capacity",
            "Release Burndown"
        )
    }
)

# Note: Dashboard creation via CLI is limited
# Full dashboard setup requires Azure DevOps UI or REST API
# This script documents the dashboard structure

foreach ($dashboard in $dashboards) {
    Write-Host "Dashboard: $($dashboard.Name)"
    Write-Host "  Description: $($dashboard.Description)"
    Write-Host "  Widgets:"
    $dashboard.Widgets | ForEach-Object { Write-Host "    - $_" }
}

Write-Host "`nâš ï¸ Note: Dashboards must be created via Azure DevOps UI"
Write-Host "   Navigate to: Dashboards > New Dashboard"
Write-Host "   Use the structure above as a guide"
```

**Output:**
- Dashboard structure documented
- 4 dashboard templates defined
- Manual creation guide provided

---

### Step 12: Configure Test Plans

**Script:** `scripts/azure-devops/12-setup-test-plans.ps1`

```powershell
# Create Test Plans and Link Test Cases

Write-Host "Setting up Test Plans..."

# Create test plans for each epic
$testPlans = @(
    @{Name="Infrastructure Testing"; Epic="Epic 1"; TestCases="Manual setup validation"},
    @{Name="Data Acquisition Testing"; Epic="Epic 2"; TestCases="7.1-Data-Acquisition-Test-Cases.md"},
    @{Name="Vector Processing Testing"; Epic="Epic 3"; TestCases="7.2-Vector-Processing-Test-Cases.md"},
    @{Name="Query & Retrieval Testing"; Epic="Epic 4"; TestCases="7.3-Query-Retrieval-Test-Cases.md"},
    @{Name="Authentication Testing"; Epic="Epic 5"; TestCases="7.4-Authentication-Security-Test-Cases.md"},
    @{Name="Event System Testing"; Epic="Epic 6"; TestCases="7.6-Event-System-Test-Cases.md"},
    @{Name="Frontend UI Testing"; Epic="Epic 7"; TestCases="7.7-UI-Frontend-Test-Cases.md"},
    @{Name="Performance Testing"; Epic="Epic 8"; TestCases="7.8-Performance-Test-Cases.md"},
    @{Name="Security Testing"; Epic="Epic 9"; TestCases="7.9-Security-Test-Cases.md"},
    @{Name="Accessibility Testing"; Epic="Epic 9"; TestCases="7.10-Accessibility-Test-Cases.md"}
)

# Test plans require Test Plans extension or manual creation
Write-Host "Test Plans structure documented"
Write-Host "âš ï¸ Note: Test Plans require Azure DevOps Test Plans license"
Write-Host "   Alternative: Link test cases as related work items to user stories"
```

---

## Master Setup Script

**Script:** `scripts/azure-devops/run-full-project-setup.ps1`

```powershell
#!/usr/bin/env pwsh
# Master script to execute all Azure DevOps project setup steps

[CmdletBinding()]
param(
    [switch]$DryRun,
    [switch]$SkipTasks  # Skip creating 1,290 tasks (for testing)
)

$ErrorActionPreference = "Stop"

Write-Host "===========================================================" -ForegroundColor Cyan
Write-Host "  HX Data Ingestion Project" -ForegroundColor Cyan
Write-Host "  Azure DevOps Project Setup" -ForegroundColor Cyan
Write-Host "===========================================================" -ForegroundColor Cyan

# Create output directory
mkdir -p out

# Verify authentication
Write-Host "`nVerifying authentication..." -ForegroundColor Yellow
az devops project show --project "HX-Data-Ingestion-Project" -o table
Write-Host "âœ… Authenticated with Azure DevOps`n" -ForegroundColor Green

if ($DryRun) {
    Write-Host "ðŸ” DRY RUN MODE - Validation only`n" -ForegroundColor Yellow
}

# Execute setup steps
$steps = @(
    @{Script="01-initialize-project.ps1"; Name="Initialize Project"},
    @{Script="02-create-area-paths.ps1"; Name="Create Area Paths"},
    @{Script="03-create-iterations.ps1"; Name="Create Iterations"},
    @{Script="04-create-epics.ps1"; Name="Create Epics"},
    @{Script="05-create-features.ps1"; Name="Create Features"},
    @{Script="06-create-user-stories.ps1"; Name="Create User Stories"}
)

if (-not $SkipTasks) {
    $steps += @{Script="07-create-tasks-bulk.ps1"; Name="Create Tasks (1,290)"}
}

$steps += @(
    @{Script="08-link-work-items.ps1"; Name="Link Work Items"},
    @{Script="09-create-queries.ps1"; Name="Create Queries"},
    @{Script="10-setup-wiki.ps1"; Name="Setup Wiki"},
    @{Script="11-create-dashboards.ps1"; Name="Create Dashboards"},
    @{Script="12-setup-test-plans.ps1"; Name="Setup Test Plans"}
)

$stepNumber = 1
foreach ($step in $steps) {
    Write-Host "[$stepNumber/$($steps.Count)] $($step.Name)..." -ForegroundColor Cyan
    
    if (-not $DryRun) {
        & "scripts/azure-devops/$($step.Script)"
        if ($LASTEXITCODE -ne 0) {
            Write-Host "âŒ Step failed: $($step.Name)" -ForegroundColor Red
            exit 1
        }
    }
    
    Write-Host "âœ… Complete`n" -ForegroundColor Green
    $stepNumber++
}

Write-Host "===========================================================" -ForegroundColor Cyan
Write-Host "  âœ…âœ…âœ… AZURE DEVOPS PROJECT SETUP COMPLETE âœ…âœ…âœ…" -ForegroundColor Green
Write-Host "===========================================================" -ForegroundColor Cyan

Write-Host "`nCreated Resources:" -ForegroundColor Yellow
Write-Host "  - Epics: 10"
Write-Host "  - Features: 50+"
Write-Host "  - User Stories: 200+"
if (-not $SkipTasks) {
    Write-Host "  - Tasks: 1,290"
}
Write-Host "  - Queries: 8+"
Write-Host "  - Wiki pages: Multiple"
Write-Host "  - Dashboards: 4 (manual setup)"

Write-Host "`nNext Steps:" -ForegroundColor Yellow
Write-Host "  1. Review Epics in Azure DevOps Boards"
Write-Host "  2. Assign team members to work items"
Write-Host "  3. Configure dashboards via UI"
Write-Host "  4. Start Sprint 0: Planning & Setup"
Write-Host "  5. Begin implementation!`n"
```

---

## Detailed Work Item Mapping

### Epic â†’ Feature â†’ User Story â†’ Task Mapping

**Epic 1: Infrastructure Foundation**
```
Epic 1
â”œâ”€â”€ F1.1: Network & Control Plane
â”‚   â”œâ”€â”€ US: As DevOps engineer, I want network configured
â”‚   â”‚   â”œâ”€â”€ T001: Configure network (192.168.10.0/24)
â”‚   â”‚   â”œâ”€â”€ T002: Setup gateway and DNS
â”‚   â”‚   â””â”€â”€ T003: Configure domain
â”‚   â””â”€â”€ US: As DevOps engineer, I want control plane HA
â”‚       â”œâ”€â”€ T004: Provision control-01
â”‚       â”œâ”€â”€ T005: Provision control-02
â”‚       â”œâ”€â”€ T006: Provision control-03
â”‚       â””â”€â”€ T007: Configure HA cluster
â”œâ”€â”€ F1.2: Application Servers
â”‚   â””â”€â”€ US: As DevOps engineer, I want app servers provisioned
â”‚       â”œâ”€â”€ T008-T011: Provision app servers
â”‚       â””â”€â”€ T012: Configure load balancing
â””â”€â”€ ... (6 more features)
```

**Epic 2: Data Acquisition**
```
Epic 2
â”œâ”€â”€ F2.1: Single Page Agent
â”‚   â”œâ”€â”€ US: User can acquire single web page
â”‚   â”‚   â”œâ”€â”€ T065: Contract test (TDD)
â”‚   â”‚   â”œâ”€â”€ T070: Integration test (TDD)
â”‚   â”‚   â”œâ”€â”€ T079: Implement agent
â”‚   â”‚   â”œâ”€â”€ T084: HTML extraction tool
â”‚   â”‚   â””â”€â”€ T085: Markdown conversion tool
â”‚   â””â”€â”€ Test Cases: TC-ACQ-001, TC-ACQ-010, TC-ACQ-050
â”œâ”€â”€ F2.2: Sequential Sitemap Agent
â”‚   â”œâ”€â”€ US: User can process sitemaps sequentially
â”‚   â”‚   â”œâ”€â”€ T066: Contract test
â”‚   â”‚   â”œâ”€â”€ T071: Integration test
â”‚   â”‚   â”œâ”€â”€ T080: Implement agent
â”‚   â”‚   â””â”€â”€ T086: Sitemap parser tool
â”‚   â””â”€â”€ Test Cases: TC-ACQ-002, TC-ACQ-011, TC-ACQ-021
â””â”€â”€ ... (5 more features)
```

**Pattern continues for all 10 Epics...**

---

## Bulk Import Templates

### CSV Template for Features

**File:** `import-templates/features-epic1.csv`

```csv
Work Item Type,Title,Description,Parent,Area Path,Iteration Path,Story Points,Priority
Feature,F1.1: Network & Control Plane Setup,"Network infrastructure setup for 15-server topology",Epic 1,Infrastructure\Networking,Citadel V2\Sprint 1,13,1
Feature,F1.2: Application Server Provisioning,"Provision 4 application servers for services",Epic 1,Infrastructure\Servers,Citadel V2\Sprint 1,8,1
Feature,F1.3: Data Services Infrastructure,"Setup Qdrant, PostgreSQL, Redis clusters",Epic 1,Infrastructure\Databases,Citadel V2\Sprint 2,13,1
...
```

### CSV Template for User Stories

**File:** `import-templates/user-stories-feature-2-1.csv`

```csv
Work Item Type,Title,Description,Parent,Acceptance Criteria,Story Points,Area Path,Tags
User Story,As data analyst I want single page acquisition,"Acquire content from individual web pages with markdown conversion",F2.1,"- User enters URL\n- Agent selected automatically\n- Content extracted\n- Stored in collection",5,Backend\Agents,acquisition;agent;pydantic-ai
...
```

### Programmatic Task Creation

**PowerShell snippet for creating tasks from task files:**

```powershell
# Read task file and create work items
$taskContent = Get-Content "Realize/5.0-Tasks/5.1-Infrastructure-Setup-Tasks.md" -Raw

# Parse tasks using regex
$pattern = '- \[ \] (T\d+) (\[P\] )?(.+)'
$matches = [regex]::Matches($taskContent, $pattern)

foreach ($match in $matches) {
    $taskId = $match.Groups[1].Value
    $isParallel = $match.Groups[2].Value -eq '[P] '
    $description = $match.Groups[3].Value
    
    # Create task work item
    $title = "$taskId: $description"
    
    # Truncate if too long (max 255 chars for title)
    if ($title.Length > 255) {
        $title = $title.Substring(0, 252) + "..."
    }
    
    az boards work-item create `
        --type Task `
        --title $title `
        --description "**Can Parallel:** $isParallel`n`n$description" `
        --area "Infrastructure" `
        --iteration "Citadel V2\Sprint 1" `
        --output json
    
    Start-Sleep -Milliseconds 700  # Rate limiting
}
```

---

## Dashboard Configuration

### Dashboard 1: Project Overview

**Widgets:**
1. **Sprint Burndown** (Burndown chart)
   - Current sprint
   - Shows remaining work vs. ideal trend

2. **Cumulative Flow Diagram** (CFD)
   - Last 30 days
   - Shows work in different states

3. **Velocity Chart**
   - Last 6 sprints
   - Story points completed per sprint

4. **Epic Progress** (Chart)
   - All 10 epics
   - % complete by task count

5. **Work Item Chart** (Pie chart)
   - By state (New, Active, In Progress, Done, Blocked)

6. **Query Results: Active Last 7 Days**
   - Shows recent activity

### Dashboard 2: Team Dashboard

**Widgets:**
1. **Assigned to Me** (Query tile)
2. **Ready for Code Review** (Query tile)
3. **Blocked Items** (Query tile with alert)
4. **Sprint Capacity** (Capacity widget)
5. **New Work Items** (Last 24 hours)
6. **Team Members** (Team widget)

### Dashboard 3: Quality Metrics

**Widgets:**
1. **Test Results Trend** (Test results)
2. **Code Coverage** (Custom widget)
3. **Bug Trend** (Chart widget)
4. **Build Success Rate** (Pipeline analytics)
5. **Deployment Frequency** (Release analytics)

### Dashboard 4: Executive Summary

**Widgets:**
1. **Epic Roadmap** (Feature timeline)
2. **Budget Burndown** (Forecast widget)
3. **Team Velocity** (Velocity chart)
4. **Key Metrics** (Markdown widget with KPIs)
5. **Recent Deployments** (Release widget)

---

## Tags Strategy

**Tag Categories:**

**By Technology:**
- `pydantic-ai`, `fastapi`, `react`, `qdrant`, `postgres`, `redis`, `kafka`
- `clerk`, `livekit`, `litellm`, `playwright`

**By Feature Area:**
- `acquisition`, `vectorization`, `retrieval`, `authentication`, `events`
- `frontend`, `monitoring`, `testing`, `deployment`

**By Work Type:**
- `infrastructure`, `backend`, `frontend`, `devops`, `documentation`
- `security`, `performance`, `testing`

**By Status:**
- `ready-for-review`, `blocked`, `needs-clarification`
- `high-priority`, `technical-debt`, `refactoring`

**By Constitutional Principle:**
- `agent-first`, `spec-driven`, `zero-debt`, `security-by-design`
- `event-driven`, `production-ready`

---

## Estimation Guidelines

### Story Point Scale (Fibonacci)
- **1 point:** Trivial task, < 2 hours
- **2 points:** Simple task, 2-4 hours
- **3 points:** Moderate task, 4-8 hours (half day)
- **5 points:** Complex task, 1-2 days
- **8 points:** Large task, 2-3 days
- **13 points:** Very large, 3-5 days (consider splitting)
- **21 points:** Needs decomposition

### Task Hour Estimates
- **0.5 hours:** Quick config change
- **1-2 hours:** Simple implementation
- **3-4 hours:** Moderate implementation with tests
- **8 hours:** Complex feature (full day)
- **16+ hours:** Should be split into multiple tasks

---

## Success Criteria

### Project Setup Complete When:

**Structure:**
- âœ… 10 Epics created
- âœ… 50+ Features created and linked
- âœ… 200+ User Stories created and linked
- âœ… 1,290 Tasks created and linked
- âœ… Area paths configured
- âœ… Iterations configured
- âœ… Queries created and pinned

**Content:**
- âœ… Wiki populated with key docs
- âœ… Test cases linked to user stories
- âœ… Dependencies established
- âœ… Story points estimated

**Configuration:**
- âœ… Dashboards created
- âœ… Team configured
- âœ… Permissions set
- âœ… Notifications configured

**Validation:**
- âœ… Sample workflow tested (Epic â†’ Feature â†’ Story â†’ Task)
- âœ… Board views configured
- âœ… Sprint 0 ready to start
- âœ… Team trained on process

---

## Execution Timeline

### Week 1: Project Structure Setup
- **Day 1-2:** Run scripts 01-04 (Initialize, Areas, Iterations, Epics)
- **Day 3-4:** Run script 05 (Create Features)
- **Day 5:** Validate structure, review with team

### Week 2: Work Item Population
- **Day 1-2:** Run script 06 (Create User Stories)
- **Day 3-4:** Run script 07 (Create Tasks - may take time due to volume)
- **Day 5:** Run script 08 (Link Work Items)

### Week 3: Configuration & Polish
- **Day 1:** Run scripts 09-10 (Queries, Wiki)
- **Day 2:** Manual dashboard creation
- **Day 3:** Test plan setup (if licensed)
- **Day 4:** Team training and onboarding
- **Day 5:** Sprint 0 planning meeting

---

## Appendix: Quick Reference Commands

### Check Project Status
```powershell
az devops project show --project "HX-Data-Ingestion-Project"
```

### List Work Items
```powershell
az boards work-item show --id <work-item-id>
az boards query --wiql "SELECT [System.Id], [System.Title] FROM WorkItems WHERE [System.TeamProject] = 'HX-Data-Ingestion-Project'"
```

### Update Work Item
```powershell
az boards work-item update --id <id> --state "In Progress" --assigned-to "user@domain.com"
```

### Link Work Items
```powershell
az boards work-item relation add --id <child-id> --relation-type parent --target-id <parent-id>
```

---

**Document Control**
- **Version:** 9.0
- **Status:** Active - Ready for Implementation
- **Last Updated:** 2025-09-28
- **Estimated Setup Time:** 2-3 weeks
- **Related:** All task files (5.1-5.10), Integration Guide (8.0)

**Total Work Items to Create:** ~1,550  
**Estimated Script Execution Time:** 6-8 hours (bulk task creation)  
**Manual Configuration Time:** 4-6 hours (dashboards, refinement)

